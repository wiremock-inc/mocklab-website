

<!doctype html>
<html lang="en" class="no-js">
  <head>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    

<meta charset="utf-8">



<!-- begin SEO -->









<title>Request Matching - Matching XML bodies | MockLab</title>







<meta name="description" content="Matching XML">

<meta property="og:locale" content="en-US">
<meta property="og:site_name" content="MockLab">
<meta property="og:title" content="Request Matching - Matching XML bodies">


  <link rel="canonical" href="https://www.mocklab.io/docs/request-matching/xml/">
  <meta property="og:url" content="https://www.mocklab.io/docs/request-matching/xml/">



  <meta property="og:description" content="Matching XML">



  <meta property="keywords" content="">





  

  



  <meta property="og:image" content="https://www.mocklab.io/images/mocklab_logo_with_text_large.png">



  <meta property="og:type" content="article">
  <meta property="article:published_time" content="2022-01-13T14:54:26+00:00">
  
    <link rel="next" href="https://www.mocklab.io/docs/response-templating/basics/" title="Response Templating - Basics">
  
  
    <link rel="prev" href="https://www.mocklab.io/docs/request-matching/url/" title="Request Matching - Matching URLs">
  



  <script type="application/ld+json">
    {
      "@context": "http://schema.org",
      "@type": "Organization",
      "url": "https://www.mocklab.io",
      "logo": "https://www.mocklab.io/images/https://www.mocklab.io/images/mocklab_logo_with_text_large.png"
    }
  </script>



  <script type="application/ld+json">
    {
      "@context" : "http://schema.org",
      "@type" : "Person",
      "name" : "",
      "url" : "https://www.mocklab.io",
      "sameAs" : null
    }
  </script>






<!-- end SEO -->


<link href="https://www.mocklab.io/feed.xml" type="application/atom+xml" rel="alternate" title="MockLab Feed">

<!-- http://t.co/dKP3o1e -->
<meta name="HandheldFriendly" content="True">
<meta name="MobileOptimized" content="320">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<script>
  document.documentElement.className = document.documentElement.className.replace(/\bno-js\b/g, '') + ' js ';
</script>

<link href="https://fonts.googleapis.com/css?family=Cairo:300" rel="stylesheet">

<!-- For all browsers -->
<link rel="stylesheet" href="https://www.mocklab.io/assets/css/main.css">

<meta http-equiv="cleartype" content="on">

<link rel="shortcut icon" type="image/x-icon" href="https://www.mocklab.io/images/favicon.png">

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/instantsearch.js@1/dist/instantsearch.min.css" />
<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/instantsearch.js@2.3.0/dist/instantsearch-theme-algolia.min.css">

    <script type="text/javascript">
    (function(c,l,a,r,i,t,y){
        c[a]=c[a]||function(){(c[a].q=c[a].q||[]).push(arguments)};
        t=l.createElement(r);t.async=1;t.src="https://www.clarity.ms/tag/"+i;
        y=l.getElementsByTagName(r)[0];y.parentNode.insertBefore(t,y);
    })(window, document, "clarity", "script", "5oa515rnev");
</script>

  </head>

  <body>
    <!--[if lt IE 9]>
<div class="notice--danger align-center" style="margin: 0;">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> to improve your experience.</div>
<![endif]-->
    

<nav class="header-nav sticky">
  <ul class="header-nav__container">
    <li class="header-nav__logo">
        <a href="https://get.mocklab.io">
            <img src="/images/mocklab_logo_with_text.png" title="MockLab logo" alt="MockLab logo"/>
        </a>
    </li>

    <li class="header-nav__item">
        <a href="/docs/getting-started/" title="Docs">Docs</a>
    </li>
    <li class="header-nav__item">
        <a href="/blog/" title="Docs">Blog</a>
    </li>
    <li class="header-nav__item">
        <a href="https://get.mocklab.io/pricing" title="Docs">Pricing</a>
    </li>
    <li class="header-nav__item header-nav__item--last">
        <a href="https://app.mocklab.io" title="Login" target="_blank">Login</a>
    </li>

    <li class="header-nav__cta">
        <a href="https://app.mocklab.io/login?for=signup" title="Sign up" target="_blank">Sign up</a>
    </li>
  </ul>

</nav>

    

<div id="main" role="main">
  

<div class="sidebar">
  <nav class="nav__list">
    <ul class="doc-categories">
      
        <li class="doc-category">
          <span class="doc-category__title">Setup & Configuration</span>
          <ul class="doc-category__links">
            
              
              
              <li>
                <a href="https://www.mocklab.io/docs/getting-started/">

                
                Getting Started
                </a>
              </li>
            
              
              
              <li>
                <a href="https://www.mocklab.io/docs/teams-and-collaboration/">

                
                Teams and Collaboration
                </a>
              </li>
            
              
              
              <li>
                <a href="https://www.mocklab.io/docs/security/">

                
                Security
                </a>
              </li>
            
          </ul>
        </li>
      
        <li class="doc-category">
          <span class="doc-category__title">Stubbing</span>
          <ul class="doc-category__links">
            
              
              
              <li>
                <a href="https://www.mocklab.io/docs/stubbing/">

                
                 Basics
                </a>
              </li>
            
              
              
              <li>
                <a href="https://www.mocklab.io/docs/advanced-stubbing/">

                
                Advanced 
                </a>
              </li>
            
              
              
              <li>
                <a href="https://www.mocklab.io/docs/delays/">

                
                Response Delays
                </a>
              </li>
            
              
              
              <li>
                <a href="https://www.mocklab.io/docs/simulating-faults/">

                
                Simulating Faults
                </a>
              </li>
            
              
              
              <li>
                <a href="https://www.mocklab.io/docs/stateful-scenarios/">

                
                Simulating State with Scenarios
                </a>
              </li>
            
              
              
              <li>
                <a href="https://www.mocklab.io/docs/proxying/">

                
                Proxying
                </a>
              </li>
            
              
              
              <li>
                <a href="https://www.mocklab.io/docs/soap-stubbing/">

                
                Working with SOAP
                </a>
              </li>
            
          </ul>
        </li>
      
        <li class="doc-category">
          <span class="doc-category__title">Request Matching</span>
          <ul class="doc-category__links">
            
              
              
              <li>
                <a href="https://www.mocklab.io/docs/request-matching/matcher-types/">

                
                Overview of Matcher Types
                </a>
              </li>
            
              
              
              <li>
                <a href="https://www.mocklab.io/docs/request-matching/url/">

                
                Matching URLs
                </a>
              </li>
            
              
              
              <li>
                <a href="https://www.mocklab.io/docs/request-matching/json/">

                
                Matching JSON requests
                </a>
              </li>
            
              
              
              <li>
                <a href="/docs/request-matching/xml/" class="nav__list-item--selected">
                

                
                Matching XML bodies
                </a>
              </li>
            
          </ul>
        </li>
      
        <li class="doc-category">
          <span class="doc-category__title">Response Templating</span>
          <ul class="doc-category__links">
            
              
              
              <li>
                <a href="https://www.mocklab.io/docs/response-templating/basics/">

                
                Basics
                </a>
              </li>
            
              
              
              <li>
                <a href="https://www.mocklab.io/docs/response-templating/conditional-logic-and-iteration/">

                
                Conditional Logic and Iteration
                </a>
              </li>
            
              
              
              <li>
                <a href="https://www.mocklab.io/docs/response-templating/string-helpers/">

                
                String Helpers
                </a>
              </li>
            
              
              
              <li>
                <a href="https://www.mocklab.io/docs/response-templating/string-encodings/">

                
                String Encodings
                </a>
              </li>
            
              
              
              <li>
                <a href="https://www.mocklab.io/docs/response-templating/number-helpers/">

                
                Number Helpers
                </a>
              </li>
            
              
              
              <li>
                <a href="https://www.mocklab.io/docs/response-templating/dates-and-times/">

                
                Dates and Times
                </a>
              </li>
            
              
              
              <li>
                <a href="https://www.mocklab.io/docs/response-templating/random-values/">

                
                Random Values
                </a>
              </li>
            
              
              
              <li>
                <a href="https://www.mocklab.io/docs/response-templating/xml/">

                
                Working with XML
                </a>
              </li>
            
              
              
              <li>
                <a href="https://www.mocklab.io/docs/response-templating/json/">

                
                Working with JSON
                </a>
              </li>
            
              
              
              <li>
                <a href="https://www.mocklab.io/docs/response-templating/jwt/">

                
                JSON Web Tokens (JWT)
                </a>
              </li>
            
              
              
              <li>
                <a href="https://www.mocklab.io/docs/response-templating/misc-helpers/">

                
                Miscellaneous Helpers
                </a>
              </li>
            
          </ul>
        </li>
      
        <li class="doc-category">
          <span class="doc-category__title">Import & Export</span>
          <ul class="doc-category__links">
            
              
              
              <li>
                <a href="https://www.mocklab.io/docs/import-and-export/">

                
                Overview
                </a>
              </li>
            
              
              
              <li>
                <a href="https://www.mocklab.io/docs/import-export/wiremock/">

                
                WireMock
                </a>
              </li>
            
              
              
              <li>
                <a href="https://www.mocklab.io/docs/swagger/">

                
                Swagger and OpenAPI
                </a>
              </li>
            
              
              
              <li>
                <a href="https://www.mocklab.io/docs/import-export/postman/">

                
                Postman
                </a>
              </li>
            
              
              
              <li>
                <a href="https://www.mocklab.io/docs/import-export/api/">

                
                Via the API
                </a>
              </li>
            
          </ul>
        </li>
      
        <li class="doc-category">
          <span class="doc-category__title">Record & Playback</span>
          <ul class="doc-category__links">
            
              
              
              <li>
                <a href="https://www.mocklab.io/docs/recording-stubs/">

                
                Recording Stubs
                </a>
              </li>
            
          </ul>
        </li>
      
        <li class="doc-category">
          <span class="doc-category__title">Tutorials</span>
          <ul class="doc-category__links">
            
              
              
              <li>
                <a href="https://www.mocklab.io/docs/mock-rest-api/">

                
                How to build a mock REST API
                </a>
              </li>
            
              
              
              <li>
                <a href="https://www.mocklab.io/docs/exploratory-testing-tutorial/">

                
                Exploratory Testing a Spring Boot App
                </a>
              </li>
            
              
              
              <li>
                <a href="https://www.mocklab.io/docs/automated-testing-with-java/">

                
                Automated Testing with Java
                </a>
              </li>
            
              
              
              <li>
                <a href="https://www.mocklab.io/docs/default-responses/">

                
                Serving a Default Response
                </a>
              </li>
            
              
              
              <li>
                <a href="https://www.mocklab.io/docs/oauth2-mock/">

                
                The OAuth2 / OpenID Connect Mock
                </a>
              </li>
            
          </ul>
        </li>
      
        <li class="doc-category">
          <span class="doc-category__title">API References</span>
          <ul class="doc-category__links">
            
              
              
              <li>
                <a href="https://www.mocklab.io/docs/mocking/">

                
                API Reference: Mocking
                </a>
              </li>
            
              
              
              <li>
                <a href="https://www.mocklab.io/docs/provisioning/">

                
                API Reference: Provisioning
                </a>
              </li>
            
          </ul>
        </li>
      
        <li class="doc-category">
          <span class="doc-category__title">Policies</span>
          <ul class="doc-category__links">
            
              
              
              <li>
                <a href="https://www.mocklab.io/docs/terms-and-conditions/">

                
                MockLab Terms of Service
                </a>
              </li>
            
              
              
              <li>
                <a href="https://www.mocklab.io/docs/privacy-policy/">

                
                Privacy Policy
                </a>
              </li>
            
          </ul>
        </li>
      
    </ul>

  </nav>
</div>


  <article class="doc-page" itemscope itemtype="http://schema.org/CreativeWork">
    <meta itemprop="headline" content="Request Matching - Matching XML bodies">
    <meta itemprop="description" content="When stubbing API functions that accept XML request bodies we may want toreturn different responses based on the XML sent. MockLab provides two match typesto supports this case - equalToXml and matchesXPath, which are describedin detail in this article.">
    <meta itemprop="datePublished" content="January 13, 2022">
    

    <div class="page__inner-wrap">
      <header>
        <h1 class="page__title" itemprop="headline">Request Matching - Matching XML bodies
</h1>
      </header>
      <section class="page__content" itemprop="text">
        <p>When stubbing API functions that accept XML request bodies we may want to
return different responses based on the XML sent. MockLab provides two match types
to supports this case - <code class="language-plaintext highlighter-rouge">equalToXml</code> and <code class="language-plaintext highlighter-rouge">matchesXPath</code>, which are described
in detail in this article.</p>

<h2 id="matching-via-xml-equality---equaltoxml">Matching via XML equality - <code class="language-plaintext highlighter-rouge">equalToXml</code></h2>

<p>The <code class="language-plaintext highlighter-rouge">equalToXml</code> match operator performs a semantic comparison of the input XML
against the expected XML. This has a number of advantages over a straight string
comparison:</p>

<ul>
  <li>Ignores differences in whitespace</li>
  <li>Ignores element and attribute order</li>
  <li>Supports placeholders so that specific elements or attributes can be excluded from the comparison</li>
</ul>

<p>By default <code class="language-plaintext highlighter-rouge">equalToXml</code> will match the input to the expected XML if all elements
and attributes are present, have the same value and there are no additional
elements or attributes.</p>

<p>For instance, given the following configuration:</p>

<p><img src="/images/screenshots/equal-to-xml.png" title="Default equal to XML" /></p>

<p>The following XML would match:</p>

<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;things&gt;</span>
  <span class="nt">&lt;two</span> <span class="na">id=</span><span class="s">"234"</span> <span class="na">val=</span><span class="s">"2"</span><span class="nt">/&gt;</span>
  <span class="nt">&lt;one</span> <span class="na">val=</span><span class="s">"1"</span> <span class="na">id=</span><span class="s">"123"</span> <span class="nt">/&gt;</span>

<span class="nt">&lt;/things&gt;</span>
</code></pre></div></div>

<h3 id="using-placeholders-to-ignore-specific-elements-or-attributes">Using placeholders to ignore specific elements or attributes</h3>

<p>As with JSON equality matching, placeholders can be used with XML to ignore specific
elements or attributes.</p>

<p>Given the following configuration:</p>

<p><img src="/images/screenshots/equal-to-xml-with-placeholders.png" title="Equal to XML with placeholders" /></p>

<p>The following XML will match:</p>

<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;things&gt;</span>
  <span class="nt">&lt;one</span> <span class="na">id=</span><span class="s">"123"</span> <span class="na">val=</span><span class="s">"123456789"</span><span class="nt">/&gt;</span>
  <span class="nt">&lt;two</span> <span class="na">id=</span><span class="s">"234"</span> <span class="na">val=</span><span class="s">"2"</span><span class="nt">/&gt;</span>
  <span class="nt">&lt;three&gt;</span>999999<span class="nt">&lt;/three&gt;</span>
<span class="nt">&lt;/things&gt;</span>
</code></pre></div></div>

<h2 id="matching-via-xpath---matchesxpath">Matching via XPath - <code class="language-plaintext highlighter-rouge">matchesXPath</code></h2>

<p>MockLab supports matching incoming XML using XPath 1.0 expressions. The most common
use case for this is when accepting XML request bodies, although it can be used
with other request fields such as headers.</p>

<p>The input XML is deemed a match if any elements are returned when the XPath
expression is evaluated against it.</p>

<p>Given a body match on the XPath expression <code class="language-plaintext highlighter-rouge">/things/thing[@name = 'socks']</code>.</p>

<p><img src="/images/screenshots/xpath-body-match.png" title="Matching on XPath" /></p>

<p>The following XML will match:</p>

<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;things&gt;</span>
  <span class="nt">&lt;thing</span> <span class="na">name=</span><span class="s">"socks"</span><span class="nt">&gt;&lt;/thing&gt;</span>
  <span class="nt">&lt;thing</span> <span class="na">name=</span><span class="s">"shoes"</span><span class="nt">&gt;&lt;/thing&gt;</span>
<span class="nt">&lt;/things&gt;</span>
</code></pre></div></div>

        
      </section>

      <footer class="page__meta">
        
        




      </footer>

      
    </div>

    
  </article>

  
  
</div>


    <div class="page__footer">
      <footer>
        <!-- start custom footer snippets -->

<!-- end custom footer snippets -->
        

<nav class="page__footer-links">
  <div class="page__footer-links-block">
    <ul>
      <li>&copy; 2022 MockLab</li>
      <li><a href="mailto:info@mocklab.io">info@mocklab.io</a></li>
    </ul>
  </div>

  <div class="page__footer-links-block">
    <h3>Help</h3>
    <ul>
      <li><a href="/docs/getting-started/">Docs</a></li>
      <li><a href="/docs/getting-started/">Blog</a></li>
      <li><a href="https://get.mocklab.io/pricing">Pricing</a></li>
    </ul>
  </div>

  <div class="page__footer-links-block">
    <h3>Solutions</h3>
    <ul>
      <li><a href="/oauth2/">OAuth2</a></li>
    </ul>
  </div>

  <div class="page__footer-links-block">
    <h3>Policies</h3>
    <ul>
      <li><a href="/docs/terms-and-conditions/">Terms and conditions</a></li>
      <li><a href="/docs/privacy-policy/">Privacy policy</a></li>
    </ul>
  </div>

  <div class="page__footer-links-block">
    <ul>

    </ul>
  </div>
</nav>

      </footer>
    </div>

    <script src="https://www.mocklab.io/assets/js/main.min.js"></script>







<script>
    window.intercomSettings = {
        app_id: "xjme6u4w"
    };
</script>
<script>(function(){var w=window;var ic=w.Intercom;if(typeof ic==="function"){ic('reattach_activator');ic('update',intercomSettings);}else{var d=document;var i=function(){i.c(arguments)};i.q=[];i.c=function(args){i.q.push(args)};w.Intercom=i;function l(){var s=d.createElement('script');s.type='text/javascript';s.async=true;s.src='https://widget.intercom.io/widget/xjme6u4w';var x=d.getElementsByTagName('script')[0];x.parentNode.insertBefore(s,x);}if(w.attachEvent){w.attachEvent('onload',l);}else{w.addEventListener('load',l,false);}}})()</script>


  </body>
</html>

