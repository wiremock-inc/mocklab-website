

<!doctype html>
<html lang="en" class="no-js">
  <head>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    

<meta charset="utf-8">



<!-- begin SEO -->









<title>Automated Testing with Java | MockLab</title>







<meta name="description" content="Creating automated tests in Java and MockLab">

<meta property="og:locale" content="en-US">
<meta property="og:site_name" content="MockLab">
<meta property="og:title" content="Automated Testing with Java">


  <link rel="canonical" href="https://www.mocklab.io/docs/automated-testing-with-java/">
  <meta property="og:url" content="https://www.mocklab.io/docs/automated-testing-with-java/">



  <meta property="og:description" content="Creating automated tests in Java and MockLab">



  <meta property="keywords" content="">





  

  



  <meta property="og:image" content="https://www.mocklab.io/images/mocklab_logo_with_text_large.png">



  <meta property="og:type" content="article">
  <meta property="article:published_time" content="2021-03-30T13:59:11+01:00">
  
    <link rel="next" href="https://www.mocklab.io/docs/default-responses/" title="Serving a Default Response">
  
  
    <link rel="prev" href="https://www.mocklab.io/docs/advanced-stubbing/" title="Advanced Stubbing">
  



  <script type="application/ld+json">
    {
      "@context": "http://schema.org",
      "@type": "Organization",
      "url": "https://www.mocklab.io",
      "logo": "https://www.mocklab.io/images/https://www.mocklab.io/images/mocklab_logo_with_text_large.png"
    }
  </script>



  <script type="application/ld+json">
    {
      "@context" : "http://schema.org",
      "@type" : "Person",
      "name" : "",
      "url" : "https://www.mocklab.io",
      "sameAs" : null
    }
  </script>






<!-- end SEO -->


<link href="https://www.mocklab.io/feed.xml" type="application/atom+xml" rel="alternate" title="MockLab Feed">

<!-- http://t.co/dKP3o1e -->
<meta name="HandheldFriendly" content="True">
<meta name="MobileOptimized" content="320">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<script>
  document.documentElement.className = document.documentElement.className.replace(/\bno-js\b/g, '') + ' js ';
</script>

<link href="https://fonts.googleapis.com/css?family=Cairo:300" rel="stylesheet">

<!-- For all browsers -->
<link rel="stylesheet" href="https://www.mocklab.io/assets/css/main.css">

<meta http-equiv="cleartype" content="on">

<link rel="shortcut icon" type="image/x-icon" href="https://www.mocklab.io/images/favicon.png">

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/instantsearch.js@1/dist/instantsearch.min.css" />
<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/instantsearch.js@2.3.0/dist/instantsearch-theme-algolia.min.css">

    <script type="text/javascript">
    (function(c,l,a,r,i,t,y){
        c[a]=c[a]||function(){(c[a].q=c[a].q||[]).push(arguments)};
        t=l.createElement(r);t.async=1;t.src="https://www.clarity.ms/tag/"+i;
        y=l.getElementsByTagName(r)[0];y.parentNode.insertBefore(t,y);
    })(window, document, "clarity", "script", "5oa515rnev");
</script>

  </head>

  <body>
    <!--[if lt IE 9]>
<div class="notice--danger align-center" style="margin: 0;">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> to improve your experience.</div>
<![endif]-->
    

<nav class="header-nav sticky">
  <ul class="header-nav__container">
    <li class="header-nav__logo">
        <a href="https://get.mocklab.io">
            <img src="/images/mocklab_logo_with_text.png" title="MockLab logo" alt="MockLab logo"/>
        </a>
    </li>

    <li class="header-nav__item">
        <a href="/docs/getting-started/" title="Docs">Docs</a>
    </li>
    <li class="header-nav__item">
        <a href="/blog/" title="Docs">Blog</a>
    </li>
    <li class="header-nav__item">
        <a href="https://get.mocklab.io/pricing" title="Docs">Pricing</a>
    </li>
    <li class="header-nav__item header-nav__item--last">
        <a href="https://app.mocklab.io" title="Login" target="_blank">Login</a>
    </li>

    <li class="header-nav__cta">
        <a href="https://app.mocklab.io/login?for=signup" title="Sign up" target="_blank">Sign up</a>
    </li>
  </ul>

</nav>

    

<div id="main" role="main">
  

<div class="sidebar">
  <nav class="nav__list">
    <ul class="doc-categories">
      
        <li class="doc-category">
          <span class="doc-category__title">Setup & Configuration</span>
          <ul class="doc-category__links">
            
              
              
              <li>
                <a href="https://www.mocklab.io/docs/getting-started/">

                
                Getting Started
                </a>
              </li>
            
              
              
              <li>
                <a href="https://www.mocklab.io/docs/security/">

                
                Security
                </a>
              </li>
            
          </ul>
        </li>
      
        <li class="doc-category">
          <span class="doc-category__title">Stubbing</span>
          <ul class="doc-category__links">
            
              
              
              <li>
                <a href="https://www.mocklab.io/docs/stubbing/">

                
                 Basics
                </a>
              </li>
            
              
              
              <li>
                <a href="https://www.mocklab.io/docs/advanced-stubbing/">

                
                Advanced 
                </a>
              </li>
            
              
              
              <li>
                <a href="https://www.mocklab.io/docs/delays/">

                
                Response Delays
                </a>
              </li>
            
              
              
              <li>
                <a href="https://www.mocklab.io/docs/simulating-faults/">

                
                Simulating Faults
                </a>
              </li>
            
              
              
              <li>
                <a href="https://www.mocklab.io/docs/stateful-scenarios/">

                
                Simulating State with Scenarios
                </a>
              </li>
            
              
              
              <li>
                <a href="https://www.mocklab.io/docs/proxying/">

                
                Proxying
                </a>
              </li>
            
              
              
              <li>
                <a href="https://www.mocklab.io/docs/soap-stubbing/">

                
                Working with SOAP
                </a>
              </li>
            
          </ul>
        </li>
      
        <li class="doc-category">
          <span class="doc-category__title">Request Matching</span>
          <ul class="doc-category__links">
            
              
              
              <li>
                <a href="https://www.mocklab.io/docs/request-matching/matcher-types/">

                
                Overview of Matcher Types
                </a>
              </li>
            
              
              
              <li>
                <a href="https://www.mocklab.io/docs/request-matching/url/">

                
                Matching URLs
                </a>
              </li>
            
              
              
              <li>
                <a href="https://www.mocklab.io/docs/request-matching/json/">

                
                Matching JSON requests
                </a>
              </li>
            
              
              
              <li>
                <a href="https://www.mocklab.io/docs/request-matching/xml/">

                
                Matching XML bodies
                </a>
              </li>
            
          </ul>
        </li>
      
        <li class="doc-category">
          <span class="doc-category__title">Response Templating</span>
          <ul class="doc-category__links">
            
              
              
              <li>
                <a href="https://www.mocklab.io/docs/response-templating/basics/">

                
                Basics
                </a>
              </li>
            
              
              
              <li>
                <a href="https://www.mocklab.io/docs/response-templating/conditional-logic-and-iteration/">

                
                Conditional Logic and Iteration
                </a>
              </li>
            
              
              
              <li>
                <a href="https://www.mocklab.io/docs/response-templating/string-helpers/">

                
                String Helpers
                </a>
              </li>
            
              
              
              <li>
                <a href="https://www.mocklab.io/docs/response-templating/string-encodings/">

                
                String Encodings
                </a>
              </li>
            
              
              
              <li>
                <a href="https://www.mocklab.io/docs/response-templating/dates-and-times/">

                
                Dates and Times
                </a>
              </li>
            
              
              
              <li>
                <a href="https://www.mocklab.io/docs/response-templating/random-values/">

                
                Random Values
                </a>
              </li>
            
              
              
              <li>
                <a href="https://www.mocklab.io/docs/response-templating/xml/">

                
                Working with XML
                </a>
              </li>
            
              
              
              <li>
                <a href="https://www.mocklab.io/docs/response-templating/json/">

                
                Working with JSON
                </a>
              </li>
            
              
              
              <li>
                <a href="https://www.mocklab.io/docs/response-templating/jwt/">

                
                JSON Web Tokens (JWT)
                </a>
              </li>
            
              
              
              <li>
                <a href="https://www.mocklab.io/docs/response-templating/misc-helpers/">

                
                Miscellaneous Helpers
                </a>
              </li>
            
          </ul>
        </li>
      
        <li class="doc-category">
          <span class="doc-category__title">Import & Export</span>
          <ul class="doc-category__links">
            
              
              
              <li>
                <a href="https://www.mocklab.io/docs/import-and-export/">

                
                Overview
                </a>
              </li>
            
              
              
              <li>
                <a href="https://www.mocklab.io/docs/import-export/wiremock/">

                
                WireMock
                </a>
              </li>
            
              
              
              <li>
                <a href="https://www.mocklab.io/docs/swagger/">

                
                Swagger and OpenAPI
                </a>
              </li>
            
              
              
              <li>
                <a href="https://www.mocklab.io/docs/import-export/postman/">

                
                Postman
                </a>
              </li>
            
              
              
              <li>
                <a href="https://www.mocklab.io/docs/import-export/api/">

                
                Via the API
                </a>
              </li>
            
          </ul>
        </li>
      
        <li class="doc-category">
          <span class="doc-category__title">Record & Playback</span>
          <ul class="doc-category__links">
            
              
              
              <li>
                <a href="https://www.mocklab.io/docs/recording-stubs/">

                
                Recording Stubs
                </a>
              </li>
            
          </ul>
        </li>
      
        <li class="doc-category">
          <span class="doc-category__title">Tutorials</span>
          <ul class="doc-category__links">
            
              
              
              <li>
                <a href="https://www.mocklab.io/docs/mock-rest-api/">

                
                How to build a mock REST API
                </a>
              </li>
            
              
              
              <li>
                <a href="https://www.mocklab.io/docs/exploratory-testing-tutorial/">

                
                Exploratory Testing a Spring Boot App
                </a>
              </li>
            
              
              
              <li>
                <a href="/docs/automated-testing-with-java/" class="nav__list-item--selected">
                

                
                Automated Testing with Java
                </a>
              </li>
            
              
              
              <li>
                <a href="https://www.mocklab.io/docs/default-responses/">

                
                Serving a Default Response
                </a>
              </li>
            
              
              
              <li>
                <a href="https://www.mocklab.io/docs/oauth2-mock/">

                
                The OAuth2 / OpenID Connect Mock
                </a>
              </li>
            
          </ul>
        </li>
      
        <li class="doc-category">
          <span class="doc-category__title">API References</span>
          <ul class="doc-category__links">
            
              
              
              <li>
                <a href="https://www.mocklab.io/docs/mocking/">

                
                API Reference: Mocking
                </a>
              </li>
            
              
              
              <li>
                <a href="https://www.mocklab.io/docs/provisioning/">

                
                API Reference: Provisioning
                </a>
              </li>
            
          </ul>
        </li>
      
        <li class="doc-category">
          <span class="doc-category__title">Policies</span>
          <ul class="doc-category__links">
            
              
              
              <li>
                <a href="https://www.mocklab.io/docs/terms-and-conditions/">

                
                MockLab Terms of Service
                </a>
              </li>
            
              
              
              <li>
                <a href="https://www.mocklab.io/docs/privacy-policy/">

                
                Privacy Policy
                </a>
              </li>
            
          </ul>
        </li>
      
    </ul>

  </nav>
</div>


  <article class="doc-page" itemscope itemtype="http://schema.org/CreativeWork">
    <meta itemprop="headline" content="Automated Testing with Java">
    <meta itemprop="description" content="Everything that can be done with MockLab’s web UI can also be done via its APIs. This can be useful when automatingtesting, as it allows stubs to be configured and torn down on-demans by individual test cases rather than it beingnecessary to configure an entire test suite’s stubs manually up-front. Working this way can make your tests a lot morereadable as it makes their preconditions expicit.">
    <meta itemprop="datePublished" content="March 30, 2021">
    

    <div class="page__inner-wrap">
      <header>
        <h1 class="page__title" itemprop="headline">Automated Testing with Java
</h1>
      </header>
      <section class="page__content" itemprop="text">
        <p>Everything that can be done with MockLab’s web UI can also be done via its APIs. This can be useful when automating
testing, as it allows stubs to be configured and torn down on-demans by individual test cases rather than it being
necessary to configure an entire test suite’s stubs manually up-front. Working this way can make your tests a lot more
readable as it makes their preconditions expicit.</p>

<p>MockLab’s API is 100% compatible with <a href="http://wiremock.org/docs/api/">WireMock’s</a>. This means that WireMock
can be used as a Java client for MockLab.</p>

<h2 id="adding-wiremock-to-your-project">Adding WireMock to your project</h2>

<p>WireMock is distributed in two different types of JAR - a standard “thin” JAR, and a “fat” standalone JAR. The latter of these
contains all of WireMock’s dependencies and repackages (shades) most of these. Either can be used as a dependency in your
project and which you choose depends primarily on whether you have dependencies already present that conflict with WireMock’s.
Picking the standalone version generally avoids these problems but at the cost of a larger JAR download.</p>

<p>If you’re using Gradle you can add WireMock to your build file’s dependencies as follows:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>testCompile 'com.github.tomakehurst:wiremock-jre8:2.27.0' // thin JAR
testCompile 'com.github.tomakehurst:wiremock-jre8-standalone:2.27.0' // standalone JAR
</code></pre></div></div>

<p>Or if you’re using Maven:</p>

<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c">&lt;!-- Thin JAR --&gt;</span>
<span class="nt">&lt;dependency&gt;</span>
  <span class="nt">&lt;groupId&gt;</span>com.github.tomakehurst<span class="nt">&lt;/groupId&gt;</span>
  <span class="nt">&lt;artifactId&gt;</span>wiremock-jre8<span class="nt">&lt;/artifactId&gt;</span>
  <span class="nt">&lt;version&gt;</span>2.27.0<span class="nt">&lt;/version&gt;</span>
  <span class="nt">&lt;scope&gt;</span>test<span class="nt">&lt;/scope&gt;</span>
<span class="nt">&lt;/dependency&gt;</span>

<span class="c">&lt;!-- Standalone JAR --&gt;</span>
<span class="nt">&lt;dependency&gt;</span>
  <span class="nt">&lt;groupId&gt;</span>com.github.tomakehurst<span class="nt">&lt;/groupId&gt;</span>
  <span class="nt">&lt;artifactId&gt;</span>wiremock-jre8-standalone<span class="nt">&lt;/artifactId&gt;</span>
  <span class="nt">&lt;version&gt;</span>2.27.0<span class="nt">&lt;/version&gt;</span>
  <span class="nt">&lt;scope&gt;</span>test<span class="nt">&lt;/scope&gt;</span>
<span class="nt">&lt;/dependency&gt;</span>
</code></pre></div></div>

<h2 id="configuring-your-test">Configuring your test</h2>

<p>After you’ve created a mock API in the MockLab UI, setting up a WireMock client to it is a one-line task (you can copy-paste this from
your mock API’s Settings page):</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// If admin API security disabled</span>
<span class="nc">WireMock</span> <span class="n">paymentGatewayMock</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">WireMock</span><span class="o">(</span><span class="s">"https"</span><span class="o">,</span> <span class="s">"payments-example.mocklab.io"</span><span class="o">,</span> <span class="mi">443</span><span class="o">);</span>

<span class="c1">// If admin API security enabled</span>
<span class="nc">WireMock</span> <span class="n">paymentGatewayMock</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">WireMockBuilder</span><span class="o">()</span>
    <span class="o">.</span><span class="na">scheme</span><span class="o">(</span><span class="s">"https"</span><span class="o">)</span>
    <span class="o">.</span><span class="na">host</span><span class="o">(</span><span class="s">"payments-example.mocklab.io"</span><span class="o">)</span>
    <span class="o">.</span><span class="na">port</span><span class="o">(</span><span class="mi">443</span><span class="o">)</span>
    <span class="o">.</span><span class="na">authenticator</span><span class="o">(</span><span class="k">new</span> <span class="nc">ClientTokenAuthenticator</span><span class="o">(</span><span class="s">"lksdr91283rsdjkfh981"</span><span class="o">))</span>
    <span class="o">.</span><span class="na">build</span><span class="o">();</span>
</code></pre></div></div>

<p>Then in your test cases you can create stubs as <a href="http://wiremock.org/docs/stubbing/">documented on the WireMock site</a>:</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">paymentGatewayMock</span><span class="o">.</span><span class="na">register</span><span class="o">(</span><span class="n">post</span><span class="o">(</span><span class="s">"/send-payment"</span><span class="o">).</span><span class="na">willReturn</span><span class="o">(</span><span class="n">created</span><span class="o">()));</span>
</code></pre></div></div>

<p>And make assertions about received requests:</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">paymentGatewayMock</span><span class="o">.</span><span class="na">verifyThat</span><span class="o">(</span><span class="n">postRequestedFor</span><span class="o">(</span><span class="n">urlPathEqualTo</span><span class="o">(</span><span class="s">"/send-payment"</span><span class="o">)));</span>
</code></pre></div></div>

<h2 id="programmatic-stub-creation">Programmatic stub creation</h2>

<p>The same approach can be taken if you want to create stubs in your API programmatically.
This can be useful when you require a large number of stubs and don’t want to create
them all by hand.</p>

<p>The example in the previous section creates an ephemeral stub i.e. one that isn’t
stored persistently and will be deleted when the API is reset. To ensure that stubs
created programmatically are saved, simply call <code class="language-plaintext highlighter-rouge">persistent()</code> during creation:</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">myMockApi</span><span class="o">.</span><span class="na">register</span><span class="o">(</span><span class="n">get</span><span class="o">(</span><span class="n">urlPathEqualTo</span><span class="o">(</span><span class="s">"/persist-this"</span><span class="o">))</span>
    <span class="o">.</span><span class="na">persistent</span><span class="o">()</span>
    <span class="o">.</span><span class="na">willReturn</span><span class="o">(</span><span class="n">ok</span><span class="o">(</span><span class="s">"Some body content"</span><span class="o">))</span>
<span class="o">);</span>
</code></pre></div></div>

<h2 id="example-project">Example project</h2>

<p>For a complete, working example of a Java web project using MockLab with automated tests see <a href="https://github.com/mocklab/mocklab-demo-app">the mocklab demo app</a>.</p>

        
      </section>

      <footer class="page__meta">
        
        




      </footer>

      
    </div>

    
  </article>

  
  
</div>


    <div class="page__footer">
      <footer>
        <!-- start custom footer snippets -->

<!-- end custom footer snippets -->
        

<nav class="page__footer-links">
  <div class="page__footer-links-block">
    <ul>
      <li>&copy; 2021 MockLab</li>
      <li><a href="mailto:info@mocklab.io">info@mocklab.io</a></li>
    </ul>
  </div>

  <div class="page__footer-links-block">
    <h3>Help</h3>
    <ul>
      <li><a href="/docs/getting-started/">Docs</a></li>
      <li><a href="/docs/getting-started/">Blog</a></li>
      <li><a href="https://get.mocklab.io/pricing">Pricing</a></li>
    </ul>
  </div>

  <div class="page__footer-links-block">
    <h3>Solutions</h3>
    <ul>
      <li><a href="/oauth2/">OAuth2</a></li>
    </ul>
  </div>

  <div class="page__footer-links-block">
    <h3>Policies</h3>
    <ul>
      <li><a href="/docs/terms-and-conditions/">Terms and conditions</a></li>
      <li><a href="/docs/privacy-policy/">Privacy policy</a></li>
    </ul>
  </div>

  <div class="page__footer-links-block">
    <ul>

    </ul>
  </div>
</nav>

      </footer>
    </div>

    <script src="https://www.mocklab.io/assets/js/main.min.js"></script>




  <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-78148205-6', 'auto');
  ga('send', 'pageview');
</script>




<script>
    window.intercomSettings = {
        app_id: "xjme6u4w"
    };
</script>
<script>(function(){var w=window;var ic=w.Intercom;if(typeof ic==="function"){ic('reattach_activator');ic('update',intercomSettings);}else{var d=document;var i=function(){i.c(arguments)};i.q=[];i.c=function(args){i.q.push(args)};w.Intercom=i;function l(){var s=d.createElement('script');s.type='text/javascript';s.async=true;s.src='https://widget.intercom.io/widget/xjme6u4w';var x=d.getElementsByTagName('script')[0];x.parentNode.insertBefore(s,x);}if(w.attachEvent){w.attachEvent('onload',l);}else{w.addEventListener('load',l,false);}}})()</script>


  </body>
</html>

